window.onload=function(){console.log("loaded"),document.querySelector("#scrollDown").addEventListener("click",function(){document.querySelector(".nav").scrollIntoView({behavior:"smooth"})}),document.querySelectorAll('a[href^="#"]').forEach(function(t){var o;t.addEventListener("click",(o=t,function(t){t.preventDefault();var e=document.querySelector(o.getAttribute("href"));window.scrollTo({top:e.offsetTop-100,behavior:"smooth"})}))}),document.querySelectorAll('input[type="button"]').forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var e=document.querySelector("#contacts");window.scrollTo({top:e.offsetTop-100,behavior:"smooth"})})}),(new Modal).init(),(new Form).init(),window.Paralax(),(new Nav).init();(new Caorusel).init("caorusel",["../assets/wrapper.jpg","../assets/wrapper.jpg","../assets/wrapper.jpg","../assets/wrapper.jpg"])},window.Caorusel=function(){function t(){this.body=null,this.imageNodes=null,this.left=null,this.right=null,this.activeNode=null}return t.prototype={init:function(t,e){var o=document.getElementById(t);o.classList.add("caorusel"),this.body=o,activeNode=e.length/2|0,this.imageNodes=e.map(function(t){var e=document.createElement("img");return e.className="caorusel__image",e.setAttribute("src",t),e.classList.add("caorusel__image_inactive"),e});for(var i=0;i<this.imageNodes.length;i++)this.body.appendChild(this.imageNodes[i]);var l=activeNode,n=this.activate.bind(this);n(l%4),setInterval(function(){n(++l%4)},3e3)},activate:function(t){var e=this.imageNodes[t],o=e.offsetLeft+e.offsetWidth/2,i=document.body.offsetWidth/2-o,l=this.body.style["margin-left"]?Number.parseInt(this.body.style["margin-left"]):0;this.body.style["margin-left"]=l+i+"px",e.classList.remove("caorusel__image_inactive"),null!==this.activeNode&&this.imageNodes[this.activeNode].classList.add("caorusel__image_inactive"),this.activeNode=t}},t}(),window.Form=function(){function t(){this.button=null,this.phone=null,this.name=null,this.details=null}return t.prototype={init:function(){this.phone=document.querySelector("#phone"),this.name=document.querySelector("#name"),this.details=document.querySelector("#details"),document.querySelector(".form__button").addEventListener("click",function(){this.parse().then(function(t){fetch("https://us-central1-hookah-catering-69873.cloudfunctions.net/newOrder",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:t}).then(function(t){document.dispatchEvent(new CustomEvent("modal.show",{detail:"Ваша заявка успешно отправленна !<br>Мы перезвоним вам в ближайшее веремя"}))}).catch(function(t){document.dispatchEvent(new CustomEvent("modal.show",{detail:"Заявка не была оправленна !<br>Попробуйте отправить форму еще раз<br>Приносим извенения за неудобства"}))})}).catch(function(t){t.style["background-color"]="#f9d0d0"})}.bind(this))},parse:function(){return new Promise(function(t,e){this.cleanErrors();var o=this.phone.value.replace(/[\(\)\s]/g,""),i={phone:o&&o.match(/^((\+7|7|8)+([0-9]){10})$/)?o:e(this.phone),name:""!==this.name.value&&this.name.value?this.name.value:e(this.name),details:""!==this.details.value&&this.details.value?this.details.value:e(this.details)};t(JSON.stringify(i))}.bind(this))},cleanErrors:function(){this.phone.style={},this.name.style={},this.details.style={}}},t}(),function(){"use strict";function t(){var c=window,a=document;if(!("scrollBehavior"in a.documentElement.style&&!0!==c.__forceSmoothScrollPolyfill__)){var t,e=c.HTMLElement||c.Element,d=468,u={scroll:c.scroll||c.scrollTo,scrollBy:c.scrollBy,elementScroll:e.prototype.scroll||h,scrollIntoView:e.prototype.scrollIntoView},f=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now,o=(t=c.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(t)?1:0);c.scroll=c.scrollTo=function(){void 0!==arguments[0]&&(!0!==i(arguments[0])?s.call(c,a.body,void 0!==arguments[0].left?~~arguments[0].left:c.scrollX||c.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:c.scrollY||c.pageYOffset):u.scroll.call(c,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:c.scrollX||c.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:c.scrollY||c.pageYOffset))},c.scrollBy=function(){void 0!==arguments[0]&&(i(arguments[0])?u.scrollBy.call(c,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):s.call(c,a.body,~~arguments[0].left+(c.scrollX||c.pageXOffset),~~arguments[0].top+(c.scrollY||c.pageYOffset)))},e.prototype.scroll=e.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==i(arguments[0])){var t=arguments[0].left,e=arguments[0].top;s.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");u.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},e.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==i(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):u.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},e.prototype.scrollIntoView=function(){if(!0!==i(arguments[0])){var t=function(t){for(;t!==a.body&&!1===(o=l(e=t,"Y")&&n(e,"Y"),i=l(e,"X")&&n(e,"X"),o||i);)t=t.parentNode||t.host;var e,o,i;return t}(this),e=t.getBoundingClientRect(),o=this.getBoundingClientRect();t!==a.body?(s.call(this,t,t.scrollLeft+o.left-e.left,t.scrollTop+o.top-e.top),"fixed"!==c.getComputedStyle(t).position&&c.scrollBy({left:e.left,top:e.top,behavior:"smooth"})):c.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}else u.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function h(t,e){this.scrollLeft=t,this.scrollTop=e}function i(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(t,e){return"Y"===e?t.clientHeight+o<t.scrollHeight:"X"===e?t.clientWidth+o<t.scrollWidth:void 0}function n(t,e){var o=c.getComputedStyle(t,null)["overflow"+e];return"auto"===o||"scroll"===o}function s(t,e,o){var i,l,n,s,r=f();s=t===a.body?(l=(i=c).scrollX||c.pageXOffset,n=c.scrollY||c.pageYOffset,u.scroll):(l=(i=t).scrollLeft,n=t.scrollTop,h),function t(e){var o,i,l,n,s=(f()-e.startTime)/d;n=s=1<s?1:s,o=.5*(1-Math.cos(Math.PI*n)),i=e.startX+(e.x-e.startX)*o,l=e.startY+(e.y-e.startY)*o,e.method.call(e.scrollable,i,l),i===e.x&&l===e.y||c.requestAnimationFrame(t.bind(c,e))}({scrollable:i,method:s,startTime:r,startX:l,startY:n,x:e,y:o})}}"object"==typeof exports&&"undefined"!=typeof module?module.exports={polyfill:t}:t()}(),window.Modal=function(){function t(){this.modalBG=null,this.modalBox=null,this.modalText=null}return t.prototype={init:function(){this.modalBG=document.querySelector(".modal"),this.modalBox=document.querySelector(".modal__content"),this.modalText=document.querySelector(".modal__content > span"),document.addEventListener("modal.show",this.show.bind(this)),document.addEventListener("modal.hide",this.hide.bind(this)),this.modalBG.addEventListener("click",function(){document.dispatchEvent(new CustomEvent("modal.hide",{}))})},show:function(t){this.modalText.innerHTML=t.detail,this.modalBG.style.display="flex",setTimeout(function(){this.modalBG.style.opacity="1"}.bind(this),1)},hide:function(){setTimeout(function(){this.modalBG.style.display="none"}.bind(this),500),this.modalBG.style.opacity="0"}},t}(),window.Nav=function(){function t(){}return t.prototype={init:function(){window.document.querySelector(".nav__menu").addEventListener("click",function(){var t=document.querySelector(".nav__links"),e=t.style.visibility,o=t.style.opacity;t.style.visibility=e&&"hidden"!==e?"hidden":"visible",t.style.opacity=o&&"0"!==o?"0":"1"})}},t}(),window.Paralax=function(){document.addEventListener("scroll",function(){for(var t=document.querySelectorAll(".paralax"),e=window.pageYOffset,o=0;o<t.length;o++){var i=t[o],l=i.offsetTop+i.offsetHeight;e>i.offsetTop&&e<=l?i.style.backgroundPositionY=(e-i.offsetTop)/1.5+"px":i.style.backgroundPositionY="0"}})};